<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="DC.Type" content="reference">
      <meta name="DC.Title" content="GET_DATA2 Function Signature 1">
      <meta name="DC.subject" content="APEX_PLUGIN_UTIL, GET_DATA2 function signature 1">
      <meta name="keywords" content="APEX_PLUGIN_UTIL, GET_DATA2 function signature 1">
      <meta name="DC.Relation" scheme="URI" content="APEX_PLUGIN_UTIL.html#GUID-E1FE05BA-E290-4446-82DC-5271B75FDD4C">
      <meta name="DC.Creator" content="Harish Konakondla">
      <meta name="DC.Creator" content="Christina Cho">
      <meta name="DC.Creator" content="Hilary Farrell">
      <meta name="DC.Creator" content="Joel Kallman">
      <meta name="DC.Creator" content="Sharon Kennedy">
      <meta name="DC.Creator" content="Christian Neumueller">
      <meta name="DC.Creator" content="Anthony Raynor">
      <meta name="DC.Creator" content="Marc Sewtz">
      <meta name="DC.Creator" content="John Snyders">
      <meta name="DC.Creator" content="Jason Straub">
      <meta name="DC.Creator" content="Vladislav Unarov">
      <meta name="DC.Creator" content="Patrick Wolf">
      <meta name="DC.Creator" content="Terri Jennings">
      <meta name="DC.Publisher" content="May2020">
      <meta name="DC.Format" content="XHTML">
      <meta name="DC.Identifier" content="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB">
      <meta name="DC.Language" content="en-US">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>GET_DATA2 Function Signature 1</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="API Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="API Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-application-express-api-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2020-05-22T13:42:07-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2020">
      <meta name="dcterms.category" content="database">
      
      
      <meta name="dcterms.product" content="en/database/oracle/application-express/20.1">
      
      <link rel="prev" href="GET_DATA-Function-Signature-2.html" title="Previous" type="text/html">
      <link rel="next" href="GET_DATA2-Function-Signature-2.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"application-express","element_name":"Application Express","display_in_url":true},"release":{"short_name":"20.1","element_name":"Release 20.1","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Application Express API Reference">
    <meta name="dcterms.isVersionOf" content="AEAPI">
    <meta name="dcterms.identifier" content="F24719-02">
    <meta name="dcterms.release" content="Release 20.1">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="GET_DATA-Function-Signature-2.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="GET_DATA2-Function-Signature-2.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">API Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="APEX_PLUGIN_UTIL.html" property="item" typeof="WebPage"><span property="name"> APEX_PLUGIN_UTIL</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">GET_DATA2 Function Signature 1</li>
            </ol>
            <a id="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB" name="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB"></a><a id="AEAPI2169"></a><a id="AEAPI2170"></a><a id="AEAPI2171"></a><a id="AEAPI2172"></a><a id="AEAPI2173"></a><a id="AEAPI2174"></a><a id="AEAPI2168"></a>
            
            <h2 id="AEAPI-GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB" class="sect2"><span class="enumeration_section">31.13 </span>GET_DATA2 Function Signature 1
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>Executes the specified SQL query restricted by the provided search string (optional) and returns the values for each column. All column values are returned along with their original data types. The search column is identified by providing a column number in the <code class="codeph">p_search_column_no</code> parameter. This function takes into account character value comparison globalization attributes defines for the application.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB__GUID-A5EA090F-C5F6-4B76-B751-2FFFC972026D">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section"><pre class="pre codeblock"><code>APEX_PLUGIN_UTIL.GET_DATA2 (
    p_sql_statement    IN VARCHAR2,
    p_min_columns      IN NUMBER,
    p_max_columns      IN NUMBER,
    p_data_type_list   IN WWV_GLOBAL.VC_ARR2 DEFAULT C_EMPTY_DATA_TYPE_LIST,
    p_component_name   IN VARCHAR2,
    p_search_type      IN VARCHAR2 DEFAULT 2,
    p_search_column_no IN VARCHAR2 DEFAULT 2,
    p_search_string    IN VARCHAR2 DEFAULT NULL,
    p_first_row        IN NUMBER DEFAULT NULL,
    p_max_rows         IN NUMBER DEFAULT NULL)
RETURN t_column_value_list2;</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB__GUID-1C8D7492-BBF8-492C-A616-5F48A9AE31CE">Parameters</p>
                  <div class="tblformal" id="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB__BABDGFGG">
                     <p class="titleintable">Table 31-14 GET_DATA2 Parameters</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="GET_DATA2 Parameters" summary="Parameter descriptions for the GET_DATA2 Function Signature 1." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d142247e78">Parameter</th>
                              <th align="left" valign="bottom" width="69%" id="d142247e81">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e86" headers="d142247e78 ">
                                 <p><code class="codeph">p_sql_statement</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e86 d142247e81 ">
                                 <p>SQL statement used for the lookup.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e94" headers="d142247e78 ">
                                 <p><code class="codeph">p_min_columns</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e94 d142247e81 ">
                                 <p>Minimum number of return columns.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e102" headers="d142247e78 ">
                                 <p><code class="codeph">p_max_columns</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e102 d142247e81 ">
                                 <p>Maximum number of return columns.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e110" headers="d142247e78 ">
                                 <p><code class="codeph">p_data_type_list</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e110 d142247e81 ">
                                 <p>If provided, checks to make sure the data type for each column matches the specified data type in the array. Use the constants <code class="codeph">c_data_type_*</code> for available data types.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e121" headers="d142247e78 ">
                                 <p><code class="codeph">p_component_name</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e121 d142247e81 ">
                                 <p>In case an error is returned, this is the name of the page item or report column used to display the error message.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e129" headers="d142247e78 ">
                                 <p><code class="codeph">p_search_type</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e129 d142247e81 ">
                                 <p>Must be one of the c_search_* constants. They are as follows: <code class="codeph">c_search_contains_case</code>, <code class="codeph">c_search_contains_ignore</code>, <code class="codeph">c_search_exact_case</code>, <code class="codeph">c_search_exact_ignore</code>  
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e149" headers="d142247e78 ">
                                 <p><code class="codeph">p_search_column_no</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e149 d142247e81 ">
                                 <p>Number of the column used to restrict the SQL statement. Must be within the <code class="codeph">p_min_columns</code> though <code class="codeph">p_max_columns</code> range.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e163" headers="d142247e78 ">
                                 <p><code class="codeph">p_search_string</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e163 d142247e81 ">
                                 <p>Value used to restrict the query.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e171" headers="d142247e78 ">
                                 <p><code class="codeph">p_first_row</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e171 d142247e81 ">
                                 <p>Start query at the specified row. All rows before the specified row are skipped.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e179" headers="d142247e78 ">
                                 <p><code class="codeph">p_max_rows</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e179 d142247e81 ">
                                 <p>Maximum number of return rows allowed.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB__GUID-27282793-987A-4F48-8DB6-86FE65C5454E">Return</p>
                  <div class="tblformal" id="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB__BABHCIGC">
                     <p class="titleintable">Table 31-15 GET_DATA2 Return</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="GET_DATA2 Return" summary="Parameter descriptions for the GET_DATA2 Function Signature 1Return ." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d142247e199">Return</th>
                              <th align="left" valign="bottom" width="69%" id="d142247e202">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d142247e207" headers="d142247e199 ">
                                 <p><code class="codeph">t_column_value_list2</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d142247e207 d142247e202 ">
                                 <p>Table of <code class="codeph">t_column_values</code> indexed by column number.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C3026414-6879-4BD5-A8A8-D31B51C7EEDB__GUID-11D5EB7B-00A6-4BE8-B7F6-9F998B102434">Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example is a simple item type plug-in rendering function which executes the LOV defined for the page item and does a case sensitive LIKE filtering with the current value of the page item. The result is then generated as a HTML list. This time, the first column of the LOV SQL statement is checked if it is of type VARCHAR2 and the second is of type number.</p><pre class="pre codeblock"><code>function render_list (
    p_item                in apex_plugin.t_page_item,
    p_value               in varchar2,
    p_is_readonly         in boolean,
    p_is_printer_friendly in boolean )
    return apex_plugin.t_page_item_render_result
is
    l_data_type_list    apex_application_global.vc_arr2;
    l_column_value_list apex_plugin_util.t_column_value_list2;
begin
    -- The first LOV column has to be a string and the second a number
    l_data_type_list(1) := apex_plugin_util.c_data_type_varchar2;
    l_data_type_list(2) := apex_plugin_util.c_data_type_number;
    --
    l_column_value_list :=
        apex_plugin_util.get_data2 (
            p_sql_statement    =&gt; p_item.lov_definition,
            p_min_columns      =&gt; 2,
            p_max_columns      =&gt; 2,
            p_data_type_list   =&gt; l_data_type_list,
            p_component_name   =&gt; p_item.name,
            p_search_type      =&gt; apex_plugin_util.c_search_contains_case,
            p_search_column_no =&gt; 1,
            p_search_string    =&gt; p_value );
    --
    sys.htp.p('&lt;ul&gt;');
    for i in 1 .. l_column_value_list.count(1)
    loop
        sys.htp.p(
            '&lt;li&gt;'||
            sys.htf.escape_sc(l_column_value_list(1).value_list(i).varchar2_value)|| -- display column
            '-'||
            sys.htf.escape_sc(l_column_value_list(2).value_list(i).number_value)|| -- return column
            '&lt;/li&gt;');
    end loop;
    sys.htp.p('&lt;/ul&gt;');
end render_list;
</code></pre><p>The following example is a simple region type plug-in rendering function which executes the SQL query defined for the region. The result is then generated as a HTML list. This example demonstrates the advanced handling of object type columns like <code class="codeph">SDO_GEOMETRY</code>.
                  </p><pre class="pre codeblock"><code>function render (
    p_region in apex_plugin.t_region,
    p_plugin in apex_plugin.t_plugin,
    p_is_printer_friendly in boolean )
    return apex_plugin.t_region_render_result
is
    l_column_value_list apex_plugin_util.t_column_value_list2;
    l_geometry sdo_geometry;
    l_value varchar2(32767);
    l_dummy pls_integer;
begin
    l_column_value_list :=
        apex_plugin_util.get_data2 (
            p_sql_statement =&gt; p_region.source,
            p_min_columns =&gt; 1,
            p_max_columns =&gt; null,
            p_component_name =&gt; p_region.name );
   --
   sys.htp.p('&lt;ul&gt;');
   for row in 1 .. l_column_value_list(1).value_list.count loop

       sys.htp.p('&lt;li&gt;');
       
       for col in 1 .. l_column_value_list.count loop
            if l_column_value_list(col).data_type = 'SDO_GEOMETRY' then

               -- Object Type columns are always returned using ANYDATA and we have to
               -- use GETOBJECT to transform them back into the original object type
               l_dummy := l_column_value_list(col).value_list(row).anydata_value.getobject(
l_geometry );
               l_value := '( type=' || l_geometry.sdo_gtype || ' srid=' || l_geometry.sdo_srid ||
                          case when l_geometry.sdo_point is not null then
                               ',x=' || l_geometry.sdo_point.x ||
                               ',y=' || l_geometry.sdo_point.y ||
                               ',z=' || l_geometry.sdo_point.z
                          end ||
                          ' )';
               else
                          l_value := apex_plugin_util.get_value_as_varchar2(
                                  p_data_type =&gt; l_column_value_list(col).data_type,
                                  p_value =&gt; l_column_value_list(col).value_list(row) );
               end if;

               sys.htp.p( case when col &gt; 1 then ' - ' end || l_value );
          end loop;
          
          sys.htp.p('&lt;li&gt;');
      end loop;
      sys.htp.p('&lt;ul&gt;');

      return null;
end;</code></pre></div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="APEX_PLUGIN_UTIL.html#GUID-E1FE05BA-E290-4446-82DC-5271B75FDD4C">APEX_PLUGIN_UTIL</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>